(()=>{"use strict";const e={};(function(e){let t,o,r,n,s,a=0;const c=!!window.MSInputMethodContext&&!!document.documentMode,i=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"),l=!(c||i),d=l,g=".js-dragsort__list",u=".js-dragsort__wrap",p=".js-dragsort__item",f="is-dragging",_="is-droppable",v={init:function(){v._initEvents(),l&&document.querySelector("html").classList.add("dragsort-full")},_initEvents:function(){document.querySelectorAll(".js-dragsort__handle").forEach((e=>e.addEventListener("dragstart",v._processDragStart))),document.querySelectorAll(p).forEach((e=>e.addEventListener("dragenter",v._processDragEnter))),document.querySelectorAll(p).forEach((e=>e.addEventListener("dragleave",v._processDragLeave))),document.querySelectorAll(p).forEach((e=>e.addEventListener("dragover",v._processDragOver))),document.querySelectorAll(p).forEach((e=>e.addEventListener("drop",v._processDrop))),document.querySelectorAll(p).forEach((e=>e.addEventListener("dragend",v._processDragEnd)))},_processDragStart:function(e){let t=e.target,o=t.closest(p),r=e.dataTransfer,n=new Image;(t.matches('[draggable="true"]')||t.closest('[draggable="true"]').closest(p)===o)&&(r.dropEffect="move",d&&(r.setDragImage?(n.src="",r.setDragImage(n,0,0)):d=!1),r.setData("Text",""),v._startDragging(o,e))},_processDragEnter:function(e){if(e.target instanceof Text)return;let o=e.target.closest(p),n=t.closest(u);0===n.length&&(n=o);let s=getComputedStyle(n).height;o===r?a+=1:o.closest(g)===t.closest(g)&&!1===o.classList.contains(_)&&(o===t?v._clearDropTarget():(o.classList.add(_),v._setDropTarget(o),4===t.compareDocumentPosition(o)?o.style.paddingBottom=s:o.style.paddingTop=s))},_processDragLeave:function(e){e.target===r&&(a-=1,a<=0&&v._clearDropTarget())},_processDragOver:function(e){e.dataTransfer.dropEffect="move";let o=e.target.closest(p);o!==t&&o.closest(g)===t.closest(g)&&e.preventDefault()},_processDrop:function(e){e.target.closest(g);let o=e.target.closest(p),r=o.closest(u),n=t,s=n.closest(u);r&&(o=r),s&&(n=s),4===n.compareDocumentPosition(o)?o.parentNode.insertBefore(n,o.nextSibling):o.parentNode.insertBefore(n,o)},_processDragEnd:function(e){v._stopDragging()},_startDragging:function(o,r){let n=o.closest(g);e&&e("/dragsort/start",n),t=o,v._createClone(o,r),o.classList.add(f),n.classList.add(f)},_stopDragging:function(){let o=t.closest(g);t.classList.remove(f),o.classList.remove(f),t=void 0,v._destroyClone(),v._clearDropTarget(),e&&e("/dragsort/stop",o)},_clearDropTarget:function(){document.querySelectorAll(".is-droppable").forEach((e=>{e.classList.remove(_),e.style.padding=0})),r=void 0,a=0},_setDropTarget:function(e){v._clearDropTarget(),r=e,a=1,r.classList.add(_)},_createClone:function(e,t){if(d){o=e.cloneNode(!0);let r=getComputedStyle(e),a=r.width,c=r.height,i=e.getBoundingClientRect(),l=i.x||i.left,d=i.y||i.top;n=t.clientX-l,s=t.clientY-d,o.style.width=a,o.style.height=c,o.querySelectorAll('[type="radio"][name]').forEach((e=>e.removeAttribute("name"))),document.querySelector("body").appendChild(o),o.classList.add("is-clone"),v._initCloneEvents(),v._updateClonePosition(t)}},_destroyClone:function(){d&&(o&&o.remove(),v._uninitCloneEvents(),o=void 0,n=void 0,s=void 0)},_initCloneEvents:function(){document.querySelector("body").addEventListener("dragover",v._updateClonePosition)},_uninitCloneEvents:function(){document.querySelector("body").removeEventListener("dragover",v._updateClonePosition)},_updateClonePosition:function(e){let t=e.clientX-n,r=e.clientY-s;o.style.left=t,o.style.top=r}};return{init:v.init}})((function(t,...o){t in e&&e[t].forEach((e=>{e.apply(null,o)}))})).init()})();
//# sourceMappingURL=dragsort.bundle.js.map