(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{bind:()=>f,unbind:()=>p});const n=[],{activate:i,deactivate:o}=function(){const e={activate:function(t,n){e._activator(t,n,e._activateSingle)},deactivate:function(t,n){e._activator(t,n,e._deactivateSingle)},_activator:function(t,n,i){if("string"==typeof t)try{t=document.querySelectorAll(t)}catch(n){let o=i===e._deactivateSingle?"deactivate":"activate";throw new DOMException(`${o} failed because it was passed an invalid selector string: '${t}'`)}t instanceof Node?i(t,n):t.length&&t.forEach&&t.forEach((e=>i(e,n)))},_activateSingle:function(t,n){if(t instanceof Node==0)throw new TypeError("activate failed because a valid Node was not passed");if(!e._getNodeBindings(t,n)&&(t.addEventListener("click",n),!1===e._isNodeType(t,"button"))){!1===e._getNodeHasBindings(t)&&t.addEventListener("keydown",e._preventSpacebarScroll);let i=e._makeSpacebarFn(n);t.addEventListener("keyup",i);let o={spacebarFn:i};if(!1===e._isNodeType(t,"a")){let i=e._makeEnterFn(n);t.addEventListener("keydown",i),o.enterFn=i}e._rememberNodeBindings(t,n,o)}},_deactivateSingle:function(t,n){if(t instanceof Node==0)throw new TypeError("deactivate failed because a valid Node was not passed");let i=e._getNodeBindings(t,n);t.removeEventListener("click",n),i&&!1===e._isNodeType(t,"button")&&(t.removeEventListener("keyup",i.spacebarFn),!1===e._isNodeType(t,"a")&&t.removeEventListener("keydown",i.enterFn),e._forgetNodeBindings(t,n),!1===e._getNodeHasBindings(t)&&t.removeEventListener("keydown",e._preventSpacebarScroll))},_rememberNodeBindings:function(e,t,i){let o=n.find((t=>t.node===e));o||(o={node:e,bindings:[{fn:t}]},n.push(o));let r=o.bindings.find((e=>e.fn===t));r||(r={fn:t},o.bindings.push(r)),Object.assign(r,i)},_forgetNodeBindings:function(e,t){let i=n.find((t=>t.node===e));if(!i)return;let o=i.bindings.find((e=>e.fn===t));if(!o)return;let r=i.bindings.indexOf(o);i.bindings.splice(r,1)},_getNodeBindings:function(e,t){let i=n.find((t=>t.node===e));if(i)return i.bindings.find((e=>e.fn===t))||void 0},_getNodeHasBindings:function(e){return!!n.find((t=>t.node===e))},_makeEnterFn:function(t){return function(n){let i=e._isEnter(n);i&&t.apply(this,arguments)}},_isEnter:function(e){return e.key&&"enter"===e.key.toLowerCase()},_preventSpacebarScroll:function(t){let n=t.target,i=e._isNodeType(n,"button"),o=e._isNodeType(n,"input","textarea"),r=e._isSpacebar(t);i||o||!r||t.preventDefault()},_makeSpacebarFn:function(t){return function(n){let i=e._isSpacebar(n);i&&t.apply(this,arguments)}},_isSpacebar:function(e){return e.key&&(" "===e.key||"spacebar"===e.key.toLowerCase())},_isNodeType:function(e,...t){t=t.map((e=>e.toLowerCase()));let n=e.nodeName.toLowerCase();return t.includes(n)}};return{activate:e.activate,deactivate:e.deactivate}}();class r extends Array{constructor(e){if("string"!=typeof e)throw new RangeError("KeyBind: Constructor argument must be a string");super(0);const t=e.trim().split(/\s+/g);for(const e of t)this.push(e)}toString(){return this.join(" ")}match(e){if(e.length!==this.length)return!1;for(const[t,n]of e.entries()){const e=this[t];if(!n.match(e))return!1}return!0}}const a=Object.freeze({alt:/\balt\+/g,ctrl:/\b(control|ctrl|command|cmd|meta)\+/g,shift:/\bshift\+/g}),s=Object.freeze({space:" ",spacebar:" ",up:"arrowup",right:"arrowright",down:"arrowdown",left:"arrowleft",esc:"escape"});class c{constructor(e){if(!("key"in e))throw new RangeError("KeyPress: key is a required option");this.key=e.key,this.modifiers={altKey:e.altKey||!1,ctrlKey:e.metaKey||e.ctrlKey||!1,shiftKey:e.shiftKey||!1}}match(e){const t={altKey:!1,ctrlKey:!1,shiftKey:!1};a.alt.test(e)&&(t.altKey=!0,e=e.replace(a.alt,"")),a.ctrl.test(e)&&(t.ctrlKey=!0,e=e.replace(a.ctrl,"")),a.shift.test(e)&&(t.shiftKey=!0,e=e.replace(a.shift,""));for(const e in t)if(t[e]&&!this.modifiers[e])return!1;return e.toLowerCase()===this.key.toLowerCase()||s[e.toLowerCase()]===this.key.toLowerCase()}}const d=new Map,l=Object.freeze({allowInInput:!1}),u=(e,t,n)=>{const i=Object.assign({},l,n),o=new r(e),a=[];return function(e){if(["Alt","Control","Meta","Shift"].includes(e.key))return;if(!i.allowInInput&&y(document.activeElement))return;if(b(document.activeElement))return;const n=new c(e);a.push(n),a.length>o.length&&a.shift(),o.match(a)&&(a.splice(0),t.apply(this,arguments))}},f=(e,t,n)=>{d.has(e)||d.set(e,new Map);const i=d.get(e);if(i.has(t))return;const o=u(e,t,n);document.addEventListener("keydown",o),i.set(t,o)},p=(e,t)=>{const n=d.get(e);if(!n)return;const i=n.get(t);document.removeEventListener("keydown",i),n.delete(t)},y=function(e){const t=e.nodeName.toLowerCase();let n=!1;if(["textarea","select"].includes(t))n=!0;else if("input"===t){n=!0;const t=(e.attributes.type?.value||"text").toLowerCase();["button","checkbox","color","file","hidden","image","radio","range","reset","submit"].includes(t)&&(n=!1)}else e.isContentEditable&&(n=!0);return n},b=function(e){let t=!1;return"input"===e.nodeName.toLowerCase()&&"password"===(e.attributes.type?.value||"text").toLowerCase()&&(t=!0),t},g={};(function(e,t,n){const i=".js-modal__body",o=".js-modal__trigger";let r,a;const s=function(e){let t,n=e.matches("input, select, textarea, button, object"),i=!1===e.disabled,o=e.matches("a, area")&&e.matches("[href]"),r=e.matches("[tabindex]");t=n?i:o||r;let a=function(e){let t=window.getComputedStyle(e),n=t.visibility,i=t.display;return"hidden"!==n&&"none"!==i}(e);return t=t&&a,t},c=function(e){let t=s(e),n=e.matches('[tabindex="-1"]');return t&&!n},d={init:function(e){e=e||{},d._onShow=e.onShow||(()=>{}),d._initEvents(),d._initSubscriptions()},_initEvents:function(){e(o,d._processTriggerClick),e(".js-modal__close",d._hideEvent)},_initSubscriptions:function(){n&&(n("/modal/show",d._showById),n("/modal/hide",d._hide))},_bindModalActiveEvents:function(){t.bind("escape",d._hide,!0),document.addEventListener("click",d._hideIfBackgroundClick),document.querySelectorAll("*").forEach((e=>e.addEventListener("focus",d._wrapTab)))},_unbindModalActiveEvents:function(){t.unbind("escape",d._hide),document.removeEventListener("click",d._hideIfBackgroundClick),document.querySelectorAll("*").forEach((e=>e.removeEventListener("focus",d._wrapTab)))},_processTriggerClick:function(e){let t=e.target.closest(o),n=t.getAttribute("href");e.preventDefault(),n=!0===/^#/.test(n)?n.substring(1):t.getAttribute("aria-controls"),d._showById(n)},_wrapTab:function(e){let t=e.target,n=a.querySelector(i),o=!!t.closest(i),r=n.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_FOLLOWING;if(!o){e.preventDefault();let t=d._getTabbable();r?t[0].focus():t[t.length-1].focus()}},_hideIfBackgroundClick:function(e){let t=e.target;t.closest(i)||t.closest(o)||d._hide()},_showById:function(e){let t=document.querySelector("#"+e);d._show(t)},_show:function(e){a?a.setAttribute("aria-hidden",!0):r=document.activeElement,a=e,e.setAttribute("aria-hidden",!1);let t=d._getBodyOpenClass(e);document.querySelector("body").classList.add(t),d._onShow(e);let n=d._getFocusable();n.length&&n[0].focus(),d._bindModalActiveEvents()},_hideEvent:function(e){e.preventDefault(),d._hide()},_hide:function(){if(a){a.setAttribute("aria-hidden",!0);let e=d._getBodyOpenClass(a);document.querySelector("body").classList.remove(e),d._unbindModalActiveEvents(),r&&r.focus(),a=void 0,r=void 0}},_getBodyOpenClass:function(e){return e.getAttribute("data-modal-body-open-class")||"modal__body-open"},_getFocusable:function(e){let t=(e=e||a).querySelector(i).querySelectorAll("*");return Array.prototype.filter.call(t,s)},_getTabbable:function(e){let t=(e=e||a).querySelector(i).querySelectorAll("*");return Array.prototype.filter.call(t,c)}};return{init:d.init}})(i,t,(function(e,t){e in g||(g[e]=[]);let n=g[e];!1===n.includes(t)&&n.push(t)})).init()})();
//# sourceMappingURL=modal.bundle.js.map