(()=>{"use strict";const e=new Map;function t(e,t,n){if("string"==typeof e)try{e=document.querySelectorAll(e)}catch(t){throw new DOMException(`${n===o?"deactivate":"activate"} failed because it was passed an invalid selector string: '${e}'`)}e instanceof HTMLElement?n(e,t):e.forEach((e=>n(e,t)))}function n(t,n){if(!(t instanceof HTMLElement))throw new TypeError("activate failed because a valid HTMLElement was not passed");if(!(i(t,n)||(t.addEventListener("click",n),t instanceof HTMLButtonElement))){!1===r(t)&&t.addEventListener("keydown",c);const o=function(e){return function(t){if(a(t))return e.call(this,t)}}(n);t.addEventListener("keyup",o);const i={spacebarFn:o};if(!(t instanceof HTMLAnchorElement)){const e=function(e){return function(t){if(function(e){return!(!e.key||"enter"!==e.key.toLowerCase())}(t))return e.call(this,t)}}(n);t.addEventListener("keydown",e),i.enterFn=e}!function(t,n,o){let i=e.get(t);i||(i=new Map([[n,o]]),e.set(t,i));let r=i.get(n);r?Object.assign(r,o):(r=Object.assign({},o),i.set(n,r))}(t,n,i)}}function o(t,n){if(!(t instanceof HTMLElement))throw new TypeError("deactivate failed because a valid HTMLElement was not passed");t.removeEventListener("click",n);const o=i(t,n);o&&(t instanceof HTMLButtonElement||(o.spacebarFn&&t.removeEventListener("keyup",o.spacebarFn),t instanceof HTMLAnchorElement||o.enterFn&&t.removeEventListener("keydown",o.enterFn),function(t,n){const o=e.get(t);o&&(o.delete(n),e.delete(t))}(t,n),!1===r(t)&&t.removeEventListener("keydown",c)))}function i(t,n){const o=e.get(t);if(o)return o.get(n)}function r(t){return e.has(t)}function c(e){const t=this,n=t instanceof HTMLButtonElement,o=t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement,i=a(e);n||o||!i||e.preventDefault()}function a(e){return!(!e.key||" "!==e.key&&"spacebar"!==e.key.toLowerCase())}(function(e){const t=".js-expander",n=".js-expander__trigger",o={OPENED:"Opened",CLOSED:"Closed"},i={init:function(){i._initEvents(),i._closeByDefault(),window.addEventListener("load",i._openByHash)},_initEvents:function(){let t=document.querySelectorAll(n);e(t,i._toggleEvent),window.addEventListener("hashchange",i._openByHash)},_toggleEvent:function(e){e.preventDefault();let t=e.target.closest(n),o=i._getTriggerSection(t);i._toggleSection(o)},_getTriggerSection:function(e){let n,o=e.getAttribute("aria-controls");return o?(n=document.getElementById(o),n||console.warn(`Could not find expander section with ID '${o}'`)):n||(n=e.closest(t)),n},_getSectionTriggers:function(e){return Array.from(document.querySelectorAll(n)).filter((t=>i._getTriggerSection(t)===e))},_toggleSection:function(e,t){if(e.querySelectorAll(n),void 0===t){let n=i._getSectionState(e);n===o.CLOSED?t=o.OPENED:n===o.OPENED&&(t=o.CLOSED)}i._setSectionState(e,t)},_getSectionState:function(e){let t=e.getAttribute("aria-expanded"),n=o.UNDEFINED;return"true"===t?n=o.OPENED:"false"===t&&(n=o.CLOSED),n},_setSectionState:function(e,t){let n=i._getSectionTriggers(e);t===o.OPENED?(e.setAttribute("aria-expanded","true"),n.forEach((e=>e.setAttribute("aria-expanded","true")))):t===o.CLOSED?(e.setAttribute("aria-expanded","false"),n.forEach((e=>e.setAttribute("aria-expanded","false")))):console.error(`Unrecognised state '${t}'`)},_closeByDefault:function(){document.querySelectorAll(t).forEach((e=>{i._setSectionState(e,o.CLOSED)}))},_openByHash:function(){let e=document.location.hash;if(e.length){let n=document.querySelector(e);if(n){let e=n.closest(t);for(e&&i._setSectionState(e,o.OPENED);e;)e=e.parentElement,e&&(e=e.closest(t),e&&i._setSectionState(e,o.OPENED));window.setTimeout((()=>n.scrollIntoView()),0)}}}};return{init:i.init}})((function(e,o){t(e,o,n)})).init()})();
//# sourceMappingURL=expander.bundle.js.map