{"version":3,"file":"autocomplete.js","mappings":"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","sources":["webpack://@cipscis/portfolio/./node_modules/@cipscis/debounce/dist/debounce.js","webpack://@cipscis/portfolio/./node_modules/@cipscis/activate/dist/activate.js","webpack://@cipscis/portfolio/./node_modules/@cipscis/pubsub/dist/pubsub.js","webpack://@cipscis/portfolio/./app/assets/js/src/autocomplete/autocomplete.js","webpack://@cipscis/portfolio/./app/assets/js/src/autocomplete/example.js"],"sourcesContent":["/**\r\n * Create a version of fn that will execute only after\r\n * no attempt to call it has been made for delay ms.\r\n * The debounced function returns a Promise that\r\n * resolves to the value returned by fn.\r\n *\r\n * Note that this will uncouple the callback from user\r\n * input, if used as an event callback. This can cause\r\n * browsers to attempt to block certain behaviour.\r\n *\r\n * This throttling is useful, for example, for waiting until\r\n * the user has stopped typing before executing a keyup callback.\r\n *\r\n * @param {Function} fn - A function to debounce\r\n * @param {number} delay - The duration to wait before calling the function (ms)\r\n */\r\nconst debounce = function (fn, delay) {\r\n    // Keep track of the timeout, Promise, and the Promise's resolver across multiple calls\r\n    // This lets later calls in the same queue know about the previous call,\r\n    // to cancel its timeout and use the same promise and resolution\r\n    // Use ReturnType<typeof setTimeout> for support across ES and NodeJS environments\r\n    let timeout;\r\n    let promise;\r\n    let res;\r\n    return function (...args) {\r\n        const scheduleResolution = (resolve) => {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n            }\r\n            timeout = setTimeout(() => {\r\n                timeout = undefined;\r\n                promise = undefined;\r\n                res = undefined;\r\n                resolve(fn.apply(this, args));\r\n            }, delay);\r\n        };\r\n        if (res) {\r\n            scheduleResolution(res);\r\n        }\r\n        else {\r\n            promise = new Promise((resolve, reject) => {\r\n                res = resolve;\r\n                scheduleResolution(res);\r\n            });\r\n        }\r\n        // There is no type guard for promise on the `if (res)` path,\r\n        // but if res is not undefined, then neither is promise\r\n        return promise;\r\n    };\r\n};\r\nexport { debounce };\r\nexport default debounce;\r\n//# sourceMappingURL=debounce.js.map","const boundEvents = new Map();\r\n/**\r\n * Handles the conversion of the elements parameter so the activator function only ever has to deal with single HTMLElements.\r\n *\r\n * @param {string | HTMLElement | NodeListOf<HTMLElement>} elements - A CSS selector string, HTMLElement, or NodeList of HTMLElements to be converted so the activator function is called once for each resulting HTMLElement.\r\n * @param {ActivateEventListener} fn - The event listener to bind to each HTMLElement.\r\n * @param {(element: HTMLElement, fn: ActivateEventListener) => void} activator - The function to link each HTMLElement to fn.\r\n *\r\n * @throws {DOMException} - If the elements argument is an invalid CSS selector string.\r\n */\r\nfunction _activator(elements, fn, activator) {\r\n    // Share the same initial logic between activate and deactivate,\r\n    // but run a different function over each element\r\n    if (typeof elements === 'string') {\r\n        try {\r\n            elements = document.querySelectorAll(elements);\r\n        }\r\n        catch (e) {\r\n            const method = activator === _deactivateSingle ? 'deactivate' : 'activate';\r\n            throw new DOMException(`${method} failed because it was passed an invalid selector string: '${elements}'`);\r\n        }\r\n    }\r\n    if (elements instanceof HTMLElement) {\r\n        activator(elements, fn);\r\n    }\r\n    else {\r\n        elements.forEach((element) => activator(element, fn));\r\n    }\r\n}\r\n/**\r\n * Binds fn to a single element.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {ActivateEventListener} fn\r\n *\r\n * @throws {TypeError} - element must be an HTMLElement.\r\n */\r\nfunction _activateSingle(element, fn) {\r\n    if (!(element instanceof HTMLElement)) {\r\n        throw new TypeError(`activate failed because a valid HTMLElement was not passed`);\r\n    }\r\n    if (_getElementBindings(element, fn)) {\r\n        // Like addEventListener, don't try to rebind new copies of the same events\r\n        return;\r\n    }\r\n    // All nodes should bind the click event\r\n    element.addEventListener('click', fn);\r\n    // Buttons will already treat keyboard events like clicks,\r\n    // so only bind them to other element types\r\n    if (!(element instanceof HTMLButtonElement)) {\r\n        if (_getElementHasBindings(element) === false) {\r\n            // addEventListener would prevent this event being\r\n            // bound multiple times, but be explicit that it is\r\n            // only bound if the element has no other events bound\r\n            element.addEventListener('keydown', _preventSpacebarScroll);\r\n        }\r\n        const spacebarFn = _makeSpacebarFn(fn);\r\n        element.addEventListener('keyup', spacebarFn);\r\n        const bindings = {\r\n            spacebarFn\r\n        };\r\n        // Links already treat \"enter\" keydown like a click\r\n        if (!(element instanceof HTMLAnchorElement)) {\r\n            // Note that holding down \"enter\" will behave differently\r\n            // for links in that it will only fire once, whereas for\r\n            // non-links, including buttons, it will fire multiple times\r\n            const enterFn = _makeEnterFn(fn);\r\n            element.addEventListener('keydown', enterFn);\r\n            bindings.enterFn = enterFn;\r\n        }\r\n        _rememberElementBindings(element, fn, bindings);\r\n    }\r\n}\r\n/**\r\n * Unbinds fn from a single element.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {ActivateEventListener} fn\r\n *\r\n * @throws {TypeError} - element must be an HTMLElement.\r\n */\r\nfunction _deactivateSingle(element, fn) {\r\n    if (!(element instanceof HTMLElement)) {\r\n        throw new TypeError(`deactivate failed because a valid HTMLElement was not passed`);\r\n    }\r\n    // All elements have had a click event bound\r\n    element.removeEventListener('click', fn);\r\n    const bindings = _getElementBindings(element, fn);\r\n    if (!bindings) {\r\n        // No other events to unbind\r\n        return;\r\n    }\r\n    // Buttons will already treat keyboard events like clicks,\r\n    // so they didn't have keyboard events bound to them\r\n    if (!(element instanceof HTMLButtonElement)) {\r\n        if (bindings.spacebarFn) {\r\n            element.removeEventListener('keyup', bindings.spacebarFn);\r\n        }\r\n        // Links already treat \"enter\" keydown like a click,\r\n        // so that event wasn't bound to them\r\n        if (!(element instanceof HTMLAnchorElement)) {\r\n            if (bindings.enterFn) {\r\n                element.removeEventListener('keydown', bindings.enterFn);\r\n            }\r\n        }\r\n        _forgetElementBindings(element, fn);\r\n        if (_getElementHasBindings(element) === false) {\r\n            // Only unbind this event if the element has no other bindings\r\n            element.removeEventListener('keydown', _preventSpacebarScroll);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Record a new set of bindings for a particular element, associated with a new primary binding.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {ActivateEventListener} fn - The primary binding.\r\n * @param {ActivateBinding} bindings - The secondary bindings.\r\n */\r\nfunction _rememberElementBindings(element, fn, bindings) {\r\n    let elementB = boundEvents.get(element);\r\n    if (!elementB) {\r\n        elementB = new Map([[fn, bindings]]);\r\n        boundEvents.set(element, elementB);\r\n    }\r\n    let fnB = elementB.get(fn);\r\n    if (fnB) {\r\n        Object.assign(fnB, bindings);\r\n    }\r\n    else {\r\n        fnB = Object.assign({}, bindings);\r\n        elementB.set(fn, fnB);\r\n    }\r\n}\r\n/**\r\n * Delete any records of bindings for a particular element and primary binding pair.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {ActivateEventListener} fn\r\n */\r\nfunction _forgetElementBindings(element, fn) {\r\n    const elementB = boundEvents.get(element);\r\n    if (!elementB) {\r\n        return;\r\n    }\r\n    elementB.delete(fn);\r\n    boundEvents.delete(element);\r\n}\r\n/**\r\n * Return the bindings for a particular element and primary binding pair.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {ActivateEventListener} fn\r\n */\r\nfunction _getElementBindings(element, fn) {\r\n    const elementB = boundEvents.get(element);\r\n    if (!elementB) {\r\n        return undefined;\r\n    }\r\n    const fnB = elementB.get(fn);\r\n    return fnB;\r\n}\r\n/**\r\n * Checks whether or not any bindings are recorded for a particular element and primary binding pair.\r\n *\r\n * @param  {HTMLElement} element\r\n *\r\n * @return {boolean}\r\n */\r\nfunction _getElementHasBindings(element) {\r\n    return boundEvents.has(element);\r\n}\r\nfunction _makeEnterFn(fn) {\r\n    return function (e) {\r\n        const isEnter = _isEnter(e);\r\n        if (isEnter) {\r\n            return fn.call(this, e);\r\n        }\r\n    };\r\n}\r\n/**\r\n * For a given KeyboardEvent, checks if it was triggered by the 'enter' key.\r\n *\r\n * @param  {KeyboardEvent} e\r\n *\r\n * @return {boolean}\r\n */\r\nfunction _isEnter(e) {\r\n    const isEnter = !!(e.key && (e.key.toLowerCase() === 'enter'));\r\n    return isEnter;\r\n}\r\n/**\r\n * For a given KeyboardEvent, if it was triggered by the 'spacebar' key, prevent the default action of scrolling the page.\r\n *\r\n * @param {KeyboardEvent} e\r\n */\r\nfunction _preventSpacebarScroll(e) {\r\n    // Prevent spacebar from scrolling the page down on keydown\r\n    const element = this;\r\n    // Buttons and inputs don't have this default action of the 'spacebar' key, so don't prevent it.\r\n    const isButton = element instanceof HTMLButtonElement;\r\n    const isInput = element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement;\r\n    const isSpacebar = _isSpacebar(e);\r\n    if (!isButton && !isInput && isSpacebar) {\r\n        e.preventDefault();\r\n    }\r\n}\r\n/**\r\n * Create a secondary binding that calls fn when triggered via the spacebar.\r\n *\r\n * @param {ActivateEventListener} fn\r\n */\r\nfunction _makeSpacebarFn(fn) {\r\n    return function (e) {\r\n        const isSpacebar = _isSpacebar(e);\r\n        if (isSpacebar) {\r\n            return fn.call(this, e);\r\n        }\r\n    };\r\n}\r\n/**\r\n * Checks if a given KeyboardEvent was triggered by the 'spacebar' key.\r\n *\r\n * @param  {KeyboardEvent} e\r\n *\r\n * @return {boolean}\r\n */\r\nfunction _isSpacebar(e) {\r\n    // IE11 uses 'spacebar' instead of ' '\r\n    const isSpacebar = !!(e.key && (e.key === ' ' || e.key.toLowerCase() === 'spacebar'));\r\n    return isSpacebar;\r\n}\r\n/**\r\n * Bind fn to all specified elements.\r\n *\r\n * @param {string | HTMLElement | NodeListOf<HTMLElement>} elements - The elements to have fn bound to them.\r\n * @param {ActivateEventListener} fn - The event listener to bind.\r\n *\r\n * @throws {DOMException} - If the elements argument is an invalid CSS selector string.\r\n */\r\nfunction activate(elements, fn) {\r\n    _activator(elements, fn, _activateSingle);\r\n}\r\n/**\r\n * Unbind fn from all specified elements.\r\n *\r\n * @param {string | HTMLElement | NodeListOf<HTMLElement>} elements - The elements to have fn unbound from them.\r\n * @param {ActivateEventListener} fn - The event listener to unbind.\r\n *\r\n * @throws {DOMException} - If the elements argument is an invalid CSS selector string.\r\n */\r\nfunction deactivate(elements, fn) {\r\n    _activator(elements, fn, _deactivateSingle);\r\n}\r\nexport { activate, deactivate, };\r\nexport default activate;\r\n//# sourceMappingURL=activate.js.map","const subscriptions = {};\r\n// Split by whitespace, then remove any empty strings\r\nconst split = (eventString) => eventString.split(/\\s+/).filter(str => !!str);\r\nconst publish = function (event, ...args) {\r\n    const events = split(event);\r\n    if (events.length > 1) {\r\n        for (const event of events) {\r\n            publish.call(this, event, ...args);\r\n        }\r\n    }\r\n    else if (event in subscriptions) {\r\n        const callbacks = subscriptions[event];\r\n        callbacks.forEach((callback) => {\r\n            callback.apply(null, args);\r\n        });\r\n    }\r\n};\r\nconst subscribe = function (event, callback) {\r\n    const events = split(event);\r\n    if (events.length > 1) {\r\n        for (const event of events) {\r\n            subscribe(event, callback);\r\n        }\r\n    }\r\n    else {\r\n        if (!(event in subscriptions)) {\r\n            subscriptions[event] = [];\r\n        }\r\n        const callbacks = subscriptions[event];\r\n        // Don't bind a particular function to an event more than once\r\n        if (callbacks.includes(callback) === false) {\r\n            callbacks.push(callback);\r\n        }\r\n    }\r\n};\r\nconst unsubscribe = function (event, callback) {\r\n    if (event in subscriptions) {\r\n        const callbacks = subscriptions[event];\r\n        const index = callbacks.indexOf(callback);\r\n        if (index !== -1) {\r\n            callbacks.splice(index, 1);\r\n        }\r\n    }\r\n};\r\nexport { publish, subscribe, unsubscribe };\r\n//# sourceMappingURL=pubsub.js.map","/* Autocomplete 1.0 */\n\nimport { debounce } from '@cipscis/debounce';\nimport { activate } from '@cipscis/activate';\nimport { publish } from '@cipscis/pubsub';\n/* global templayed */\n\nconst autocomplete = (function (templayed, debounce, activate, publish) {\n\t'use strict';\n\n\tconst selectors = {\n\t\twrapper: '.js-autocomplete',\n\t\tinput: '.js-autocomplete__input',\n\n\t\tresults: '.js-autocomplete__result-list',\n\t\tresultItem: '.js-autocomplete__result-item',\n\n\t\ttemplate: '.js-autocomplete__template',\n\t\tstatus: '.js-autocomplete__status',\n\t};\n\n\tconst dataSelectors = {\n\t\tsource: 'autocomplete-source',\n\t\tvalue: 'autocomplete-value',\n\t\ttemplateId: 'autocomplete-template-id',\n\t};\n\n\tconst delay = 500;\n\tconst minQueryLength = 3;\n\n\tconst visible = function ($el) {\n\t\tlet style = window.getComputedStyle($el);\n\n\t\tlet visibility = style.visibility;\n\t\tlet display = style.display;\n\n\t\tlet isVisible = visibility !== 'hidden' && display !== 'none';\n\n\t\treturn isVisible;\n\t};\n\n\tconst module = {\n\t\tinit: function ($el) {\n\t\t\tif (typeof $el === 'undefined') {\n\t\t\t\t$el = selectors.wrapper;\n\t\t\t}\n\n\t\t\tif (typeof $el === 'string') {\n\t\t\t\t$el = document.querySelectorAll($el);\n\t\t\t}\n\n\t\t\tif ($el.length) {\n\t\t\t\t$el.forEach(module._initEl);\n\t\t\t} else {\n\t\t\t\tmodule._initEl($el);\n\t\t\t}\n\t\t},\n\n\t\t_initEl: function ($el) {\n\t\t\tlet $wrapper = $el.closest(selectors.wrapper);\n\n\t\t\tmodule._initEvents($wrapper);\n\t\t},\n\n\t\t_initEvents: function ($wrapper) {\n\t\t\t$wrapper.addEventListener('focusout', module._onUnfocus($wrapper));\n\t\t\t$wrapper.addEventListener('focusin', module._onFocus($wrapper));\n\t\t\t$wrapper.addEventListener('keydown', module._hideResultsOnEsc($wrapper));\n\n\t\t\tlet $input = $wrapper.querySelector(selectors.input);\n\n\t\t\t$input.addEventListener('input', module._inputEvent);\n\t\t\t$input.addEventListener('keydown', module._selectResultOnEnter);\n\t\t\t$input.addEventListener('keydown', module._changeResultFocus);\n\t\t},\n\n\t\t// Just run debounce once, instead of creating a new debounced function each time\n\t\t_inputEvent: debounce(function (e) {\n\t\t\tlet $input = this;\n\t\t\tlet $wrapper = $input.closest(selectors.wrapper);\n\n\t\t\tmodule._doQuery($wrapper);\n\t\t}, delay),\n\n\t\t_doQuery: function ($wrapper) {\n\t\t\tlet $input = $wrapper.querySelector(selectors.input);\n\n\t\t\tlet url = $wrapper.getAttribute(`data-${dataSelectors.source}`);\n\t\t\tlet val = $input.value;\n\n\t\t\tif (val.length >= minQueryLength) {\n\t\t\t\tlet request = new XMLHttpRequest();\n\t\t\t\tlet data = {\n\t\t\t\t\tquery: val,\n\t\t\t\t};\n\n\t\t\t\trequest.onload = function () {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (this.status === 200) {\n\t\t\t\t\t\t\tlet response = this.response;\n\t\t\t\t\t\t\tlet data = JSON.parse(response);\n\n\t\t\t\t\t\t\tmodule._querySuccess($wrapper, data);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmodule._queryError($wrapper);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tmodule._queryError($wrapper);\n\t\t\t\t\t\t// console.error(e);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\trequest.open('GET', url);\n\t\t\t\trequest.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n\t\t\t\trequest.send(JSON.stringify(data));\n\t\t\t} else {\n\t\t\t\tmodule._clearResults($wrapper);\n\t\t\t}\n\t\t},\n\n\t\t_buildResults: function ($wrapper, data) {\n\t\t\tmodule._setResults($wrapper, data);\n\t\t\tmodule._showResults($wrapper);\n\t\t},\n\n\t\t_querySuccess: function ($wrapper, data) {\n\t\t\tmodule._buildResults($wrapper, data);\n\t\t},\n\n\t\t_queryError: function ($wrapper) {\n\t\t\tlet $status = $wrapper.querySelector(selectors.status);\n\n\t\t\tif (publish) {\n\t\t\t\tpublish('/status/error', 'Sorry, something went wrong', $status);\n\t\t\t}\n\t\t},\n\n\t\t_setResults: function ($wrapper, data) {\n\t\t\tlet $results = $wrapper.querySelector(selectors.results);\n\t\t\tlet $template = module._getTemplate($wrapper);\n\n\t\t\tlet template = $template.innerHTML;\n\t\t\tlet resultsHtml = module._buildResultsHtml(template, data);\n\n\t\t\t$results.innerHTML = resultsHtml;\n\n\t\t\tmodule._bindResultEvents($results);\n\t\t},\n\n\t\t_buildResultsHtml: function (template, data) {\n\t\t\t// Templayed has trouble with carriage returns\n\t\t\ttemplate = template.replace(/\\r/g, '');\n\n\t\t\tlet resultsHtml = templayed(template)(data);\n\n\t\t\treturn resultsHtml;\n\t\t},\n\n\t\t_bindResultEvents: function ($results) {\n\t\t\tlet $resultItems = $results.querySelectorAll(selectors.resultItem);\n\t\t\t$resultItems.forEach((el) => el.addEventListener('keydown', module._changeResultFocus));\n\t\t\tactivate($resultItems, module._selectResultEvent);\n\t\t},\n\n\t\t_clearResults: function ($wrapper) {\n\t\t\tlet $results = $wrapper.querySelector(selectors.results);\n\t\t\t$results.innerHTML = '';\n\n\n\t\t\tmodule._hideResults($wrapper);\n\t\t},\n\n\t\t_showResults: function ($wrapper) {\n\t\t\tlet $input = $wrapper.querySelector(selectors.input);\n\t\t\tlet $results = $wrapper.querySelector(selectors.results);\n\t\t\tlet resultsHtml = $results.innerHTML;\n\n\t\t\tif (resultsHtml.trim() === '') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$results.innerHTML = '';\n\t\t\t$results.style.display = 'block';\n\t\t\t$input.setAttribute('aria-expanded', true);\n\n\t\t\tif (publish) {\n\t\t\t\tlet numResults = $results.querySelectorAll(selectors.resultItem).length;\n\t\t\t\tpublish('/assist/speak', numResults + ' results');\n\t\t\t}\n\n\t\t\t// Asynchronous to allow screen readers to read it out\n\t\t\twindow.setTimeout(() => {\n\t\t\t\t$results.innerHTML = resultsHtml;\n\t\t\t\tmodule._bindResultEvents($results);\n\t\t\t}, 100);\n\t\t},\n\n\t\t_hideResults: function ($wrapper) {\n\t\t\tlet $results = $wrapper.querySelector(selectors.results);\n\t\t\tlet $input = $wrapper.querySelector(selectors.input);\n\n\t\t\t$results.style.display = 'none';\n\t\t\t$input.setAttribute('aria-expanded', false);\n\n\t\t\tmodule._removeResultFocus($wrapper);\n\t\t},\n\n\t\t_hideResultsOnEsc: function ($wrapper) {\n\t\t\treturn function (e) {\n\t\t\t\tif (e.key.toLowerCase() === 'escape') {\n\t\t\t\t\tmodule._hideResults($wrapper);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\n\t\t_onUnfocus: function ($wrapper) {\n\t\t\treturn function (e) {\n\t\t\t\t// 1 ms timeout so we can check what element has focus after blur\n\t\t\t\twindow.setTimeout(function () {\n\t\t\t\t\tlet $hasFocus = document.activeElement;\n\t\t\t\t\tlet inFocus = $hasFocus.closest(selectors.wrapper) === $wrapper;\n\n\t\t\t\t\tlet $focusedResult = module._getFocusEl($wrapper);\n\n\t\t\t\t\tif (inFocus === false) {\n\t\t\t\t\t\tif ($focusedResult.closest(selectors.resultItem)) {\n\t\t\t\t\t\t\tmodule._selectResult($focusedResult, false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmodule._hideResults($wrapper);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\t\t};\n\t\t},\n\n\t\t_onFocus: function ($wrapper) {\n\t\t\treturn function (e) {\n\t\t\t\tlet $focus = module._getFocusEl($wrapper);\n\t\t\t\tlet $results = $wrapper.querySelector(selectors.results);\n\n\t\t\t\tlet inFocus = $focus.closest(selectors.wrapper) === $wrapper;\n\t\t\t\tlet resultsVisible = visible($results);\n\t\t\t\tlet hasResults = $results.innerHTML.trim() !== '';\n\n\t\t\t\tif (inFocus && !resultsVisible && hasResults) {\n\t\t\t\t\tmodule._showResults($wrapper);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\n\t\t_getTemplate: function ($wrapper) {\n\t\t\tlet $template = $wrapper.querySelector(selectors.template);\n\n\t\t\tif ($template.length === 0) {\n\t\t\t\tlet templateId = $wrapper.getAttribute(`data-${dataSelectors.templateId}`);\n\t\t\t\t$template = document.getElementById(templateId);\n\t\t\t}\n\n\t\t\treturn $template;\n\t\t},\n\n\t\t_selectResultEvent: function (e) {\n\t\t\tlet $wrapper = e.target.closest(selectors.wrapper);\n\t\t\tlet $result = e.target.closest(selectors.resultItem);\n\n\t\t\tif (!$result) {\n\t\t\t\tlet $resultItems = $wrapper.querySelectorAll(selectors.resultItem);\n\t\t\t\t$result = Array.prototype.find.call($resultItems, (el) => el.getAttribute('aria-selected') === 'true');\n\t\t\t}\n\n\t\t\tif ((!$result) || $result.matches(selectors.resultItem) === false) {\n\t\t\t\t$result = module._getFocusEl($wrapper);\n\t\t\t}\n\n\t\t\tif ($result && $result.matches(selectors.resultItem)) {\n\t\t\t\te.preventDefault();\n\t\t\t\tmodule._selectResult($result, true);\n\t\t\t}\n\t\t},\n\n\t\t_selectResultOnEnter: function (e) {\n\t\t\tif (e.key.toLowerCase() === 'enter') {\n\t\t\t\tmodule._selectResultEvent(e);\n\t\t\t}\n\t\t},\n\n\t\t_selectResult: function ($result, focusOnInput) {\n\t\t\tlet $wrapper = $result.closest(selectors.wrapper);\n\t\t\tlet $input = $wrapper.querySelector(selectors.input);\n\n\t\t\t$input.value = $result.getAttribute(`data-${dataSelectors.value}`);\n\n\t\t\tif (focusOnInput) {\n\t\t\t\t$input.focus();\n\t\t\t}\n\n\t\t\tmodule._clearResults($wrapper);\n\t\t},\n\n\t\t_changeResultFocus: function (e) {\n\t\t\tlet key = e.key.toLowerCase();\n\n\t\t\tlet $wrapper = e.target.closest(selectors.wrapper);\n\t\t\tlet $results = $wrapper.querySelector(selectors.results);\n\t\t\tlet $resultItems = $wrapper.querySelectorAll(selectors.resultItem);\n\t\t\tif (!$resultItems.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet offset;\n\t\t\tif (key === 'arrowup' || key === 'up') {\n\t\t\t\tif (e.altKey && (visible($resultItems[0]) === true)) {\n\t\t\t\t\tmodule._hideResults($wrapper);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\toffset = -1;\n\t\t\t} else if (key === 'arrowdown' || key === 'down') {\n\t\t\t\tif (e.altKey && (visible($results) === false)) {\n\t\t\t\t\tmodule._showResults($wrapper);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\toffset = +1;\n\t\t\t} else {\n\t\t\t\tif (key === 'arrowleft' || key === 'left' || key === 'arrowright' || key === 'right' || key === 'home' || key === 'end') {\n\t\t\t\t\t// If moving the caret within the input, return focus\n\t\t\t\t\tmodule._removeResultFocus($wrapper);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't scroll with arrow press\n\t\t\te.preventDefault();\n\n\t\t\tlet $result = module._getFocusEl($wrapper).closest(selectors.resultItem);\n\n\t\t\tlet index = Array.prototype.indexOf.call($resultItems, $result);\n\t\t\tlet newIndex = index + offset || 0;\n\n\t\t\tif (newIndex < 0) {\n\t\t\t\tnewIndex = $resultItems.length - 1;\n\t\t\t} else if (newIndex >= $resultItems.length) {\n\t\t\t\tnewIndex = newIndex % $resultItems.length;\n\t\t\t}\n\n\t\t\t$result = $resultItems[newIndex];\n\n\t\t\tmodule._setResultFocus($result);\n\t\t},\n\n\t\t_setResultFocus: function ($result) {\n\t\t\tlet $wrapper = $result.closest(selectors.wrapper);\n\t\t\tlet $input = $wrapper.querySelector(selectors.input);\n\t\t\tlet $results = $wrapper.querySelectorAll(selectors.resultItem);\n\n\t\t\t$results.forEach((el) => {\n\t\t\t\tif (el !== $result) {\n\t\t\t\t\tel.setAttribute('aria-selected', false);\n\t\t\t\t}\n\t\t\t});\n\t\t\t$input.setAttribute('aria-activedescendant', $result.getAttribute('id'));\n\t\t\t$result.setAttribute('aria-selected', true);\n\t\t},\n\n\t\t_removeResultFocus: function ($wrapper) {\n\t\t\tlet $input = $wrapper.querySelector(selectors.input);\n\t\t\tlet $resultItems = $wrapper.querySelectorAll(selectors.resultItem);\n\n\t\t\t$input.removeAttribute('aria-activedescendant');\n\t\t\t$resultItems.forEach((el) => el.setAttribute('aria-selected', false));\n\t\t},\n\n\t\t_getFocusEl: function ($wrapper) {\n\t\t\tlet $focusEl;\n\t\t\tlet $input = $wrapper.querySelector(selectors.input);\n\t\t\tlet focusDescendantId = $input.getAttribute('aria-activedescendant');\n\n\t\t\tif (focusDescendantId) {\n\t\t\t\t$focusEl = document.getElementById(focusDescendantId);\n\t\t\t}\n\n\t\t\tif (!focusDescendantId || $focusEl.length === 0) {\n\t\t\t\t$focusEl = document.activeElement;\n\t\t\t}\n\n\t\t\treturn $focusEl;\n\t\t},\n\t};\n\n\treturn {\n\t\tinit: module.init,\n\t};\n})(templayed, debounce, activate, publish);\n\nexport default autocomplete;\n","import autocomplete from './autocomplete.js';\n\nautocomplete.init();\n"],"names":["boundEvents","Map","_activator","elements","fn","activator","document","querySelectorAll","e","DOMException","_deactivateSingle","HTMLElement","forEach","element","_activateSingle","TypeError","_getElementBindings","addEventListener","HTMLButtonElement","_getElementHasBindings","_preventSpacebarScroll","spacebarFn","_isSpacebar","call","this","_makeSpacebarFn","bindings","HTMLAnchorElement","enterFn","isEnter","key","toLowerCase","_isEnter","_makeEnterFn","elementB","get","set","fnB","Object","assign","_rememberElementBindings","removeEventListener","delete","_forgetElementBindings","has","isButton","isInput","HTMLInputElement","HTMLTextAreaElement","isSpacebar","preventDefault","subscriptions","publish","event","args","events","split","filter","str","length","callback","apply","autocomplete","templayed","debounce","activate","selectors","visible","$el","style","window","getComputedStyle","visibility","display","module","init","_initEl","$wrapper","closest","_initEvents","_onUnfocus","_onFocus","_hideResultsOnEsc","$input","querySelector","_inputEvent","_selectResultOnEnter","_changeResultFocus","_doQuery","url","getAttribute","val","value","request","XMLHttpRequest","data","query","onload","status","response","JSON","parse","_querySuccess","_queryError","open","setRequestHeader","send","stringify","_clearResults","_buildResults","_setResults","_showResults","$status","$results","template","_getTemplate","innerHTML","resultsHtml","_buildResultsHtml","_bindResultEvents","replace","$resultItems","el","_selectResultEvent","_hideResults","trim","setAttribute","numResults","setTimeout","_removeResultFocus","inFocus","activeElement","$focusedResult","_getFocusEl","_selectResult","$focus","resultsVisible","hasResults","$template","templateId","getElementById","target","$result","Array","prototype","find","matches","focusOnInput","focus","offset","altKey","newIndex","indexOf","_setResultFocus","removeAttribute","$focusEl","focusDescendantId","delay","timeout","promise","res","scheduleResolution","resolve","clearTimeout","undefined","Promise","reject"],"sourceRoot":""}