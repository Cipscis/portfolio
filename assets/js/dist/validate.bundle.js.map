{"version":3,"sources":["webpack://@cipscis/portfolio/./app/assets/js/src/validate/validate.js","webpack://@cipscis/portfolio/./node_modules/@cipscis/throttle/dist/throttle.js","webpack://@cipscis/portfolio/./app/assets/js/src/validate/example.js"],"names":["throttle","selectors","classes","module","bindValidateEvent","$forms","document","querySelectorAll","Array","isArray","i","length","addEventListener","_invalidEvent","e","$form","target","form","$invalidInputs","$status","classList","add","forEach","textContent","window","setTimeout","_clearStatusClass","foreach","remove","fn","delay","timeout","args","returnVal","apply","this","undefined","validate"],"mappings":"oBAEiB,SAAWA,GAC3B,MAAMC,EAEG,uBAGHC,EAGE,WAGFC,EAAS,CACdC,kBAAmB,SAAUC,GACN,iBAAXA,EACVA,EAASC,SAASC,iBAAiBF,GACxBG,MAAMC,QAAQJ,KACzBA,EAAS,CAACA,IAGX,IAAK,IAAIK,EAAI,EAAGA,EAAIL,EAAOM,OAAQD,IACtBL,EAAOK,GAGbE,iBAAiB,UAAWZ,EAASG,EAAOU,cAAe,KAAK,IAIxEA,cAAe,SAAUC,GACxB,IAAIC,EAAQD,EAAEE,OAAOC,KACjBC,EAAiBH,EAAMR,iBA5BnB,mDA6BJY,EAAUJ,EAAMR,iBAAiBN,GAErCc,EAAMK,UAAUC,IA1BN,gBA4BVF,EAAQG,SAASH,IAChBA,EAAQC,UAAUC,IAAInB,GACtBiB,EAAQI,YAAc,GAGtBC,OAAOC,YAAW,IAAMN,EAAQI,YAAc,0CAA0CL,EAAeP,uBAAuBO,EAAeP,OAAS,EAAI,IAAM,OAAO,SAIzKe,kBAAmB,SAAUX,GACdA,EAAMR,iBAAiBN,GAE7B0B,SAASR,GAAYA,EAAQC,UAAUQ,OAAO1B,OAIxD,OAAOC,EAAOC,mBAnDE,ECKA,SAAUyB,EAAIC,GAE3B,IAAIC,EACJ,OAAO,YAAaC,GAChB,IAAKD,EAAS,CACV,MAAME,EAAYJ,EAAGK,MAAMC,KAAMH,GAIjC,OAHAD,EAAUN,YAAW,KACjBM,OAAUK,IACXN,GACIG,MCdnBI,CAAS,sB","file":"validate.bundle.js","sourcesContent":["import { throttle } from '@cipscis/throttle';\n\nconst validate = (function (throttle) {\n\tconst selectors = {\n\t\tinvalid: 'input:invalid, select:invalid, textarea:invalid',\n\t\tstatus: '.js-validate__status'\n\t}\n\n\tconst classes = {\n\t\tvalidated: 'is-validated',\n\n\t\terror: 'is-error'\n\t};\n\n\tconst module = {\n\t\tbindValidateEvent: function ($forms) {\n\t\t\tif (typeof $forms === 'string') {\n\t\t\t\t$forms = document.querySelectorAll($forms);\n\t\t\t} else if (!Array.isArray($forms)) {\n\t\t\t\t$forms = [$forms];\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < $forms.length; i++) {\n\t\t\t\tlet $form = $forms[i];\n\n\t\t\t\t// Throttling at such a tiny delay prevents multiple concurrent calls\n\t\t\t\t$form.addEventListener('invalid', throttle(module._invalidEvent, 10), true);\n\t\t\t}\n\t\t},\n\n\t\t_invalidEvent: function (e) {\n\t\t\tlet $form = e.target.form;\n\t\t\tlet $invalidInputs = $form.querySelectorAll(selectors.invalid);\n\t\t\tlet $status = $form.querySelectorAll(selectors.status);\n\n\t\t\t$form.classList.add(classes.validated);\n\n\t\t\t$status.forEach(($status) => {\n\t\t\t\t$status.classList.add(classes.error);\n\t\t\t\t$status.textContent = '';\n\n\t\t\t\t// Set asynchronously so the new text will be read by screen readers\n\t\t\t\twindow.setTimeout(() => $status.textContent = `We couldn't submit the form because of ${$invalidInputs.length} invalid input${$invalidInputs.length > 1 ? 's' : ''}.`, 100);\n\t\t\t});\n\t\t},\n\n\t\t_clearStatusClass: function ($form) {\n\t\t\tlet $status = $form.querySelectorAll(selectors.status);\n\n\t\t\t$status.foreach(($status) => $status.classList.remove(classes.error));\n\t\t}\n\t};\n\n\treturn module.bindValidateEvent;\n})(throttle);\n\nexport { validate };\nexport default validate;\n","/**\r\n * Create a version of fn that will only execute if it\r\n * hasn't been called successfully within the last delay ms\r\n *\r\n * @param {Function} fn - A function to throttle\r\n * @param {number} delay - The duration to wait before the function can be called again (ms)\r\n */\r\nconst throttle = function (fn, delay) {\r\n    // Use ReturnType<typeof setTimeout> for support across ES and NodeJS environments\r\n    let timeout;\r\n    return function (...args) {\r\n        if (!timeout) {\r\n            const returnVal = fn.apply(this, args);\r\n            timeout = setTimeout(() => {\r\n                timeout = undefined;\r\n            }, delay);\r\n            return returnVal;\r\n        }\r\n    };\r\n};\r\nexport { throttle };\r\nexport default throttle;\r\n//# sourceMappingURL=throttle.js.map","import { validate } from './validate.js';\n\nvalidate('.js-validate-form');\n"],"sourceRoot":""}