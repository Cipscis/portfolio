(()=>{"use strict";class e extends Array{constructor(e){if("string"!=typeof e)throw new RangeError("KeyBind: Constructor argument must be a string");super(0);const t=e.trim().split(/\s+/g);for(const e of t)this.push(e)}toString(){return this.join(" ")}match(e){if(e.length!==this.length)return!1;for(const[t,n]of e.entries()){const e=this[t];if(!n.match(e))return!1}return!0}}const t=Object.freeze({alt:/\balt\+/g,ctrl:/\b(control|ctrl|command|cmd|meta)\+/g,shift:/\bshift\+/g}),n=new Map([["space"," "],["spacebar"," "],["up","arrowup"],["right","arrowright"],["down","arrowdown"],["left","arrowleft"],["esc","escape"]]);class o{key;modifiers;constructor(e){if(!("key"in e))throw new RangeError("KeyPress: key is a required option");this.key=e.key,this.modifiers={altKey:e.altKey||!1,ctrlKey:e.metaKey||e.ctrlKey||!1,shiftKey:e.shiftKey||!1}}match(e){const o={altKey:!1,ctrlKey:!1,shiftKey:!1};let i;for(i in t.alt.test(e)&&(o.altKey=!0,e=e.replace(t.alt,"")),t.ctrl.test(e)&&(o.ctrlKey=!0,e=e.replace(t.ctrl,"")),t.shift.test(e)&&(o.shiftKey=!0,e=e.replace(t.shift,"")),o)if(o[i]&&!this.modifiers[i])return!1;return e.toLowerCase()===this.key.toLowerCase()||n.get(e.toLowerCase())===this.key.toLowerCase()}}const i=new Map,s=Object.freeze({allowInInput:!1}),r=(t,n,i)=>{const r=Object.assign({},s,i),a=new e(t),u=[];return function(e,...t){if(["Alt","Control","Meta","Shift"].includes(e.key))return;if(!r.allowInInput&&l(document.activeElement))return;if(c(document.activeElement))return;const i=new o(e);u.push(i),u.length>a.length&&u.shift(),a.match(u)&&(u.splice(0),n.apply(this,[e,...t]))}},l=function(e){let t=!1;if(e instanceof HTMLElement)if(e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)t=!0;else if(e instanceof HTMLInputElement){t=!0;const n=(e.type||"text").toLowerCase();["button","checkbox","color","file","hidden","image","radio","range","reset","submit"].includes(n)&&(t=!1)}else e.isContentEditable&&(t=!0);return t},c=function(e){let t=!1;return e instanceof HTMLInputElement&&"password"===(e.type||"text").toLowerCase()&&(t=!0),t};(function(){const e=".js-tooltip",t="tooltip--hidden";let n=!1;const o={init:function(){!1===n&&(o._initEvents(),o._initKeybinding()),n=!0},_initEvents:function(){document.querySelectorAll(e).forEach((e=>{e.addEventListener("mouseleave",o._removeHiddenClassEvent(e)),e.addEventListener("focusout",o._processTooltipFocusOut)}))},_initKeybinding:function(){((e,t,n)=>{i.has(e)||i.set(e,new Map);const o=i.get(e);if(o.has(t))return;const s=r(e,t,void 0);document.addEventListener("keydown",s),o.set(t,s)})("escape",o._hideOpenTooltips)},_hideOpenTooltips:function(){o._getOpenTooltips().forEach((e=>{e.classList.add(t)}))},_removeHiddenClassEvent:function(e){return t=>{document.activeElement!==e&&o._removeHiddenClass(e)}},_removeHiddenClass:function(e){e.classList.remove(t)},_processTooltipFocusOut:function(e){window.setTimeout((()=>{let t=e.target,n=document.activeElement,i=o._getClosestTooltip(t);i!==o._getClosestTooltip(n)&&o._removeHiddenClass(i)}),0)},_getOpenTooltips:function(){let e=o._getOpenTooltipBodies(),t=[];return e.forEach((e=>{let n=o._getClosestTooltip(e);n?t.push(n):console.error("Could not find tooltip of open body:",e)})),t},_getOpenTooltipBodies:function(){let e=document.querySelectorAll(".js-tooltip__body");return Array.from(e).filter((e=>null!==e.offsetParent))},_getClosestTooltip:function(t){let n=t;for(;n&&!1===n.matches(e);)n=n.parentElement;return n}};return{init:o.init}})().init()})();
//# sourceMappingURL=tooltip.js.map