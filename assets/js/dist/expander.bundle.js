(()=>{"use strict";const e=[],{activate:t,deactivate:n}=function(){const t={activate:function(e,n){t._activator(e,n,t._activateSingle)},deactivate:function(e,n){t._activator(e,n,t._deactivateSingle)},_activator:function(e,n,i){if("string"==typeof e)try{e=document.querySelectorAll(e)}catch(n){let o=i===t._deactivateSingle?"deactivate":"activate";throw new DOMException(`${o} failed because it was passed an invalid selector string: '${e}'`)}e instanceof Node?i(e,n):e.length&&e.forEach&&e.forEach((e=>i(e,n)))},_activateSingle:function(e,n){if(e instanceof Node==0)throw new TypeError("activate failed because a valid Node was not passed");if(!t._getNodeBindings(e,n)&&(e.addEventListener("click",n),!1===t._isNodeType(e,"button"))){!1===t._getNodeHasBindings(e)&&e.addEventListener("keydown",t._preventSpacebarScroll);let i=t._makeSpacebarFn(n);e.addEventListener("keyup",i);let o={spacebarFn:i};if(!1===t._isNodeType(e,"a")){let i=t._makeEnterFn(n);e.addEventListener("keydown",i),o.enterFn=i}t._rememberNodeBindings(e,n,o)}},_deactivateSingle:function(e,n){if(e instanceof Node==0)throw new TypeError("deactivate failed because a valid Node was not passed");let i=t._getNodeBindings(e,n);e.removeEventListener("click",n),i&&!1===t._isNodeType(e,"button")&&(e.removeEventListener("keyup",i.spacebarFn),!1===t._isNodeType(e,"a")&&e.removeEventListener("keydown",i.enterFn),t._forgetNodeBindings(e,n),!1===t._getNodeHasBindings(e)&&e.removeEventListener("keydown",t._preventSpacebarScroll))},_rememberNodeBindings:function(t,n,i){let o=e.find((e=>e.node===t));o||(o={node:t,bindings:[{fn:n}]},e.push(o));let a=o.bindings.find((e=>e.fn===n));a||(a={fn:n},o.bindings.push(a)),Object.assign(a,i)},_forgetNodeBindings:function(t,n){let i=e.find((e=>e.node===t));if(!i)return;let o=i.bindings.find((e=>e.fn===n));if(!o)return;let a=i.bindings.indexOf(o);i.bindings.splice(a,1)},_getNodeBindings:function(t,n){let i=e.find((e=>e.node===t));if(i)return i.bindings.find((e=>e.fn===n))||void 0},_getNodeHasBindings:function(t){return!!e.find((e=>e.node===t))},_makeEnterFn:function(e){return function(n){let i=t._isEnter(n);i&&e.apply(this,arguments)}},_isEnter:function(e){return e.key&&"enter"===e.key.toLowerCase()},_preventSpacebarScroll:function(e){let n=e.target,i=t._isNodeType(n,"button"),o=t._isNodeType(n,"input","textarea"),a=t._isSpacebar(e);i||o||!a||e.preventDefault()},_makeSpacebarFn:function(e){return function(n){let i=t._isSpacebar(n);i&&e.apply(this,arguments)}},_isSpacebar:function(e){return e.key&&(" "===e.key||"spacebar"===e.key.toLowerCase())},_isNodeType:function(e,...t){t=t.map((e=>e.toLowerCase()));let n=e.nodeName.toLowerCase();return t.includes(n)}};return{activate:t.activate,deactivate:t.deactivate}}();(function(e){const t=".js-expander",n=".js-expander__trigger",i={OPENED:"Opened",CLOSED:"Closed"},o={init:function(){o._initEvents(),o._closeByDefault(),window.addEventListener("load",o._openByHash)},_initEvents:function(){let t=document.querySelectorAll(n);e(t,o._toggleEvent),window.addEventListener("hashchange",o._openByHash)},_toggleEvent:function(e){e.preventDefault();let t=e.target.closest(n),i=o._getTriggerSection(t);o._toggleSection(i)},_getTriggerSection:function(e){let n,i=e.getAttribute("aria-controls");return i?(n=document.getElementById(i),n||console.warn(`Could not find expander section with ID '${i}'`)):n||(n=e.closest(t)),n},_getSectionTriggers:function(e){return Array.from(document.querySelectorAll(n)).filter((t=>o._getTriggerSection(t)===e))},_toggleSection:function(e,t){if(e.querySelectorAll(n),void 0===t){let n=o._getSectionState(e);n===i.CLOSED?t=i.OPENED:n===i.OPENED&&(t=i.CLOSED)}o._setSectionState(e,t)},_getSectionState:function(e){let t=e.getAttribute("aria-expanded"),n=i.UNDEFINED;return"true"===t?n=i.OPENED:"false"===t&&(n=i.CLOSED),n},_setSectionState:function(e,t){let n=o._getSectionTriggers(e);t===i.OPENED?(e.setAttribute("aria-expanded","true"),n.forEach((e=>e.setAttribute("aria-expanded","true")))):t===i.CLOSED?(e.setAttribute("aria-expanded","false"),n.forEach((e=>e.setAttribute("aria-expanded","false")))):console.error(`Unrecognised state '${t}'`)},_closeByDefault:function(){document.querySelectorAll(t).forEach((e=>{o._setSectionState(e,i.CLOSED)}))},_openByHash:function(){let e=document.location.hash;if(e.length){let n=document.querySelector(e);if(n){let e=n.closest(t);for(e&&o._setSectionState(e,i.OPENED);e;)e=e.parentElement,e&&(e=e.closest(t),e&&o._setSectionState(e,i.OPENED));window.setTimeout((()=>n.scrollIntoView()),0)}}}};return{init:o.init}})(t).init()})();
//# sourceMappingURL=expander.bundle.js.map