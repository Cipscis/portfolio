(()=>{"use strict";const e={},t=function(r,...o){const n=r.split(/\s+/).filter((e=>!!e));if(n.length>1)for(const e of n)t.call(this,e,...o);else r in e&&e[r].forEach((e=>{e.apply(null,o)}))},r=function(e){let t,r,o,n,s,a=0;const l=!!window.MSInputMethodContext&&!!document.documentMode,c=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"),i=!(l||c);let d=i;const g=".js-dragsort__list",u=".js-dragsort__wrap",p=".js-dragsort__item",f="is-dragging",_="is-droppable",m={init:function(){m._initEvents(),i&&document.querySelector("html").classList.add("dragsort-full")},_initEvents:function(){document.querySelectorAll(".js-dragsort__handle").forEach((e=>e.addEventListener("dragstart",m._processDragStart))),document.querySelectorAll(p).forEach((e=>e.addEventListener("dragenter",m._processDragEnter))),document.querySelectorAll(p).forEach((e=>e.addEventListener("dragleave",m._processDragLeave))),document.querySelectorAll(p).forEach((e=>e.addEventListener("dragover",m._processDragOver))),document.querySelectorAll(p).forEach((e=>e.addEventListener("drop",m._processDrop))),document.querySelectorAll(p).forEach((e=>e.addEventListener("dragend",m._processDragEnd)))},_processDragStart:function(e){let t=e.target,r=t.closest(p),o=e.dataTransfer,n=new Image;(t.matches('[draggable="true"]')||t.closest('[draggable="true"]').closest(p)===r)&&(o.dropEffect="move",d&&(o.setDragImage?(n.src="",o.setDragImage(n,0,0)):d=!1),o.setData("Text",""),m._startDragging(r,e))},_processDragEnter:function(e){if(e.target instanceof Text)return;let r=e.target.closest(p),n=t.closest(u);0===n.length&&(n=r);let s=getComputedStyle(n).height;r===o?a+=1:r.closest(g)===t.closest(g)&&!1===r.classList.contains(_)&&(r===t?m._clearDropTarget():(r.classList.add(_),m._setDropTarget(r),4===t.compareDocumentPosition(r)?r.style.paddingBottom=s:r.style.paddingTop=s))},_processDragLeave:function(e){e.target===o&&(a-=1,a<=0&&m._clearDropTarget())},_processDragOver:function(e){e.dataTransfer.dropEffect="move";let r=e.target.closest(p);r!==t&&r.closest(g)===t.closest(g)&&e.preventDefault()},_processDrop:function(e){let r=e.target.closest(p),o=r.closest(u),n=t,s=n.closest(u);o&&(r=o),s&&(n=s),4===n.compareDocumentPosition(r)?r.parentNode.insertBefore(n,r.nextSibling):r.parentNode.insertBefore(n,r)},_processDragEnd:function(e){m._stopDragging()},_startDragging:function(r,o){let n=r.closest(g);e&&e("/dragsort/start",n),t=r,m._createClone(r,o),r.classList.add(f),n.classList.add(f)},_stopDragging:function(){let r=t.closest(g);t.classList.remove(f),r.classList.remove(f),t=null,m._destroyClone(),m._clearDropTarget(),e&&e("/dragsort/stop",r)},_clearDropTarget:function(){document.querySelectorAll(".is-droppable").forEach((e=>{e.classList.remove(_),e.style.padding=0})),o=null,a=0},_setDropTarget:function(e){m._clearDropTarget(),o=e,a=1,o.classList.add(_)},_createClone:function(e,t){if(d){r=e.cloneNode(!0);let o=getComputedStyle(e),a=o.width,l=o.height,c=e.getBoundingClientRect(),i=c.x||c.left,d=c.y||c.top;n=t.clientX-i,s=t.clientY-d,r.style.width=a,r.style.height=l,r.querySelectorAll('[type="radio"][name]').forEach((e=>e.removeAttribute("name"))),document.querySelector("body").appendChild(r),r.classList.add("is-clone"),m._initCloneEvents(),m._updateClonePosition(t)}},_destroyClone:function(){d&&(r&&r.remove(),m._uninitCloneEvents(),r=null,n=null,s=null)},_initCloneEvents:function(){document.querySelector("body").addEventListener("dragover",m._updateClonePosition)},_uninitCloneEvents:function(){document.querySelector("body").removeEventListener("dragover",m._updateClonePosition)},_updateClonePosition:function(e){let t=e.clientX-n,o=e.clientY-s;r.style.left=t,r.style.top=o}};return{init:m.init}}(t);r.init()})();
//# sourceMappingURL=dragsort.js.map